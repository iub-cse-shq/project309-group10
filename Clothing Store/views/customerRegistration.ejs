<%- include('partials/header.ejs') %>
  <title>Customer Registration</title>
  <link rel="stylesheet" href="css/customerRegistration.css" />
</head>

<body>
  <header class="header">
    <ul>
      <li id="om">Clothing Store</li>
     
    </ul>
  </header>
  <h1 id="new">Customer Registration</h1>
  <form action="/customerRegistration" method="POST">
    <input id="type" type="text"  name="type" value="customer" readonly="readonly"/>
    <input id="name" type="text"  name="name" placeholder="Name"/>
    <input id="password" type="password" name="password" placeholder="Password" />
    <input id="address" type="text" name="address" placeholder="Address" />
    <input id="email" type="email" name="email" placeholder="Email" />
    <input id="phone" type="text" name="phone" placeholder="Phone number" onkeypress="allowNumbersOnly(event)"/>
    <button id="submit" type="submit">Submit</button>
  </form>

  
  <button id="cancel">Cancel</button>


  <script src="js/jquery-3.5.1.min.js"></script>
  <script> 

  
   
/*
    $('#submit').click(function() {
      let customerData = {
        name: $('#name').val(),
        password: $('#password').val(),
        address: $('#address').val(),
        email: $('#email').val(),
        phone: $('#phone').val(),
      };
  var addressMax = 100;
  var nameMax=30;
  var addressLength = $('#address').val().length;
  var nameLength = $('#name').val().length;
  
  if (addressLength >= addressMax) {
    alert('Description Input size exceeded preferred limit. ')
    return;
  }
  if (nameLength >=nameMax) {
    alert('Description Input size exceeded preferred limit. ')
    return;
  }
  if (!(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(customerData.email))) {
    alert('Invalid email. ')
        return;
    }
  if(customerData.name&&customerData.password&&customerData.address&&customerData.email&&customerData.phone){ 
      $.ajax({
        type: 'POST',
        url: '/customerRegistration',
        data: customerData,
        success: response => {
          console.log(response);
          alert('You are registered!!!')
          window.location.replace('/customerLogin')
        },
        error: response => {
          console.log(response);
           console.log('Failed to register')
        }

      });
    }else{
      alert('Required input data is missing')
    }
  

    });
  */  
//------------------------------------------------------------------------------------------------------------  
  
    $('#cancel').click(function () {
        $('#name').val("");
        $('#password').val("");
        $('#address').val(""),
        $('#email').val("");
        $('#phone').val("");
    });
   
    function allowNumbersOnly(e) {
    var code = (e.which) ? e.which : e.keyCode;
    if (code > 31 && (code < 48 || code > 57)) {
        e.preventDefault();
    }
}




  </script>
  
<%- include('partials/footer.ejs') %>  
